'use strict';var initializeSongs=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c,d,e,f,g,h=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f();case 2:return b=a.sent,a.next=5,g(b);case 5:return a.abrupt('return',new Promise(function(a){a()}).catch(function(a){console.error(a)}));case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}();return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(g=function(a){return new Promise(function(b){console.info('Loading song data...'),localStorage.setItem('songs',JSON.stringify(a)),b()})},f=function(){var a=this;return new Promise(function(){var b=_asyncToGenerator(regeneratorRuntime.mark(function b(c){var d,e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d='js/songs.json',a.next=3,fetch(d);case 3:if(e=a.sent,!e.ok){a.next=9;break}console.info('Song database found!'),c(e.json()),a.next=10;break;case 9:throw'File "'+d+'" not found on server!';case 10:case'end':return a.stop();}},b,a)}));return function(){return b.apply(this,arguments)}}()).catch(function(a){console.error(a)})},e=function(){return new Promise(function(a){console.info('Loading songs into memory...'),a(JSON.parse(localStorage.getItem('songs')))})},d=function(a){var b=document.createElement('div');b.classList.add('content__nav-item');var c=!0,d=!1,e=void 0;try{for(var f,g,h=a[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)g=f.value,b.appendChild(g)}catch(a){d=!0,e=a}finally{try{!c&&h.return&&h.return()}finally{if(d)throw e}}navbar.insertAdjacentElement('beforeend',b)},c=function(a){var b=document.createElement('span');return b.classList.add('content__nav-span'),b.innerText=a,b},b=function(){return new Promise(function(a){for(var b=[],e=songArray.slice(),f=[],g=0;26>g;g++)b.push(String.fromCharCode(65+g));f.push(c('All')),d(f),f=[];for(var h=function(a){songArray.some(function(c){return c.title.charAt(0)===b[a]})&&f.push(c(b[a]))},a=0;j<b.length;j++)h(a);d(f),f=[];for(var m=0,n=Math.floor(songArray.length/100),l=null;m<=n;m++)l=100<e.length?99:e.length-1,f.push(c(e[0].number+' - '+e[l].number)),e.splice(0,l+1);d(f),f=[],a()})},localStorage.hasOwnProperty('songs')){a.next=10;break}return console.info('Searching for list of songs...'),a.next=10,h();case 10:return a.next=12,e();case 12:return songArray=a.sent,a.next=15,b();case 15:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}var toc=document.getElementById('toc'),song=document.getElementById('song'),back=document.getElementById('back'),overlay=document.getElementById('overlay'),modal=document.getElementById('modal'),modalClose=modal.getElementsByClassName('modal__close')[0],refresh=document.getElementById('refresh'),navbar=document.getElementById('navbar'),modalBody=document.getElementById('modalBody'),songArray=[];initializeSongs(),populateNav(),document.addEventListener('keyup',function(a){27==a.which&&modalClose.click()}),overlay.addEventListener('click',function(){showModal(!1)}),modalClose.addEventListener('click',function(){showModal(!1)}),modalBody.addEventListener('click',function(a){if(a.target.classList.contains('modal__item')){var b=modal.querySelector('.modal__num').innerText;showSong(b)}},!1),back.addEventListener('click',function(){toc.removeAttribute('hidden'),song.setAttribute('hidden',''),back.setAttribute('disabled','')}),refresh.addEventListener('click',function(){localStorage.removeItem('songs'),location.reload(!0)});function populateNav(){navbar.addEventListener('click',function(a){if(a.target.classList.contains('content__nav-span')){var b=a.target.innerText;b=b.replace(/-/g,' '),b=b.split(/\s+/),showRecords(b)}},!1)}function showRecords(a){var b=Number.parseInt;for(showModal(!0);modalBody.firstChild;)modalBody.removeChild(modalBody.firstChild);if(console.log(a),'All'===a[0])for(var c=songArray.length,d=0;d<c;d++){var h=document.createElement('div'),j=document.createElement('span');j.classList.add('modal__num'),j.innerText=d+1,h.insertAdjacentElement('beforeend',j),h.classList.add('modal__item'),h.innerText=songArray[d].title,modalBody.insertAdjacentElement('beforeend',h),h.insertAdjacentElement('beforeend',j)}else if(Number.isInteger(b(a[0])))for(var k=b(a[0])-1;k<b(a[1]);k++){var l=document.createElement('div'),m=document.createElement('span');m.classList.add('modal__num'),m.innerText=k+1,l.insertAdjacentElement('beforeend',m),l.classList.add('modal__item'),l.innerText=songArray[k].title,modalBody.insertAdjacentElement('beforeend',l),l.insertAdjacentElement('beforeend',m)}else{for(var e=Object.keys(songArray).length,f=[],g=0;g<e;g++)songArray[g].title.charAt(0)===a[0]&&f.push([songArray[g].title,g]);f.sort(function(c,a){return c[0].toUpperCase().localeCompare(a[0].toUpperCase())});for(var n=0;n<f.length;n++){var o=document.createElement('div'),p=document.createElement('span');p.classList.add('modal__num'),p.innerText=f[n][1]+1,o.classList.add('modal__item'),o.innerText=f[n][0],modalBody.insertAdjacentElement('beforeend',o),o.insertAdjacentElement('beforeend',p)}}}function showModal(a){a?(modal.classList.add('modal--active'),overlay.classList.add('overlay--active')):(modal.classList.remove('modal--active'),overlay.classList.remove('overlay--active'))}function showSong(a){var b=songArray[a],c=[],d=b.number,e=b.title,f=b.verse,g=b.chorus,h=b.author;song.innerHTML='',c.push(d,e,f,g,h);var k=c.length,l=document.createElement('div');l.classList.add('songHeader');for(var p=0;p<k;p++)switch(p){case 0:if(c[p]){var i=document.createElement('div');i.classList.add('songNum'),i.innerText=c[p],l.insertAdjacentElement('beforeend',i)}break;case 1:if(c[p]){var q=document.createElement('div');q.classList.add('songTitle'),q.innerText=c[p],l.insertAdjacentElement('afterbegin',q),song.insertAdjacentElement('beforeend',l)}break;case 2:if(c[p])for(var m,n=c[p].length+1,o=0;o<n;o++)switch(m=document.createElement('div'),o){case 0:m.classList+='verse',m.innerText=cleanupString(c[p][o]),song.insertAdjacentElement('beforeend',m);break;case 1:0<c[3].length&&(m.classList+='chorus',m.innerText=cleanupString(c[3]),song.insertAdjacentElement('beforeend',m));break;default:m.classList+='verse',m.innerText=cleanupString(c[p][o-1]),song.insertAdjacentElement('beforeend',m);}break;case 4:if(c[p]){var r=document.createElement('div');r.classList+='author',r.innerText=c[p],song.insertAdjacentElement('beforeend',r)}}return toc.setAttribute('hidden',''),song.removeAttribute('hidden'),back.removeAttribute('disabled'),modalClose.click(),!1}function cleanupString(a){var b=a.replace(/\*/g,'').replace(/\s{2,}/g,'\n').trim();return b}

